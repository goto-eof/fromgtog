name: fromgtog
version: '10.0.3'
summary: Advanced utility for Git backup and bulk migration(GitHub,Gitea,GitLab,Local)
description: |
  Advanced cross-platform utility for Git backup and bulk migration.
grade: stable
confinement: strict
base: core24
icon: snap/gui/icon.png
title: FromGtoG
website: https://andre-i.eu
issues: https://github.com/goto-eof
source-code: https://github.com/goto-eof/fromgtog
donation: https://github.com/sponsors/goto-eof
contact: https://andre-i.eu/#contactme
compression: lzo
license: CC-BY-NC-4.0
slots:
  fromgtog-dbus:
    interface: dbus
    bus: session
    name: it.es5.fromgtog.dbus
apps:
  fromgtog:
    environment:
      ALSA_CONFIG_PATH: $SNAP/etc/asound.conf
      GIO_MODULE_DIR: $SNAP/usr/lib/$CRAFT_ARCH_TRIPLET_BUILD_FOR/gio/modules:$SNAP/usr/lib/$CRAFT_ARCH_TRIPLET_BUILD_FOR/libproxy
      LD_LIBRARY_PATH: |
        $SNAP/usr/lib/$CRAFT_ARCH_TRIPLET_BUILD_FOR:
        $SNAP/usr/lib/$CRAFT_ARCH_TRIPLET_BUILD_FOR/alsa-lib:
        $SNAP/usr/lib/$CRAFT_ARCH_TRIPLET_BUILD_FOR/gio/modules:
        $SNAP/usr/lib/$CRAFT_ARCH_TRIPLET_BUILD_FOR/libproxy:
        $LD_LIBRARY_PATH
    command: $SNAPCRAFT_PROJECT_DIR/$SNAPCRAFT_PROJECT_NAME/usr/bin/run.sh
    extensions: [ gnome ]
    plugs:
      - audio-playback
      - browser-support
      - home
      - network
      - network-bind
      - removable-media
      - unity7
      - wayland
      - x11
      - desktop
platforms:
  amd64:
    build-on: [ amd64 ]
    build-for: [ amd64 ]
  arm64:
    build-on: [ arm64 ]
    build-for: [ arm64 ]
parts:
  wrapper:
    plugin: dump
    source: snap/local
    source-type: local
    organize:
      build.sh: $SNAPCRAFT_PROJECT_DIR/$SNAPCRAFT_PROJECT_NAME/usr/local/build.sh
      prime.sh: $SNAPCRAFT_PROJECT_DIR/$SNAPCRAFT_PROJECT_NAME/usr/local/prime.sh
      run.sh: $SNAPCRAFT_PROJECT_DIR/$SNAPCRAFT_PROJECT_NAME/usr/bin/run.sh
      asound.conf: $SNAPCRAFT_PROJECT_DIR/$SNAPCRAFT_PROJECT_NAME/etc/asound.conf
    prime:
      - build.sh
      - prime.sh
      - run.sh
      - asound.conf
  application:
    plugin: maven
    source: .
    build-packages:
      - openjdk-21-jdk
      - maven
    after:
      - wrapper
    override-build: |
      . $SNAPCRAFT_PROJECT_DIR/$SNAPCRAFT_PROJECT_NAME/usr/local/build.sh
      snapcraftctl build
    stage-packages:
      - glib-networking
      - libgtk-3-0
      - xdg-utils
      - libasound2
      - libasound2-plugins
      - alsa-utils
      - libappindicator3-1
      - libgdk-pixbuf2.0-0
      - librsvg2-2
    override-prime: |
      snapcraftctl prime
      . $SNAPCRAFT_PROJECT_DIR/$SNAPCRAFT_PROJECT_NAME/usr/local/prime.sh
